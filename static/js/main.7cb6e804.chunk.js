(this.webpackJsonpuwScheduler=this.webpackJsonpuwScheduler||[]).push([[0],{18:function(e,a,t){e.exports=t(38)},23:function(e,a,t){},29:function(e,a,t){},31:function(e,a,t){},32:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var c,n,r=t(0),s=t.n(r),l=t(17),o=t.n(l),i=(t(23),t(2)),u=t(3),d=t(4),m=t(7),b=t(8),f=(t(29),function(e){var a=e.leftIcon,t=e.onLeftIconClick,c=e.rightIcon,n=e.onRightIconClick,r=Object(m.a)(e,["leftIcon","onLeftIconClick","rightIcon","onRightIconClick"]),l={borderTopLeftRadius:a?0:"4px",borderBottomLeftRadius:a?0:"4px",borderTopRightRadius:c?0:"4px",borderBottomRightRadius:c?0:"4px"};return s.a.createElement("div",{className:"uw-scheduler-field"},a?s.a.createElement("button",{className:"uw-scheduler-text-input-left-button",onClick:null!==t&&void 0!==t?t:void 0},s.a.createElement(b.a,{icon:a})):null,s.a.createElement("input",Object.assign({style:l,className:"uw-scheduler-text-input",type:"text"},r)),c?s.a.createElement("button",{className:"uw-scheduler-text-input-right-button",onClick:null!==n&&void 0!==n?n:void 0},s.a.createElement(b.a,{icon:c})):null)}),h=t(10),p=t(12),v=t.n(p),E=t(15),y=/(\d\d):(\d\d)/,g=function(e){if(!e)return!1;var a=y.exec(e);if(a)return Number(a[1])+Math.round(Number(a[2])/60*100)/100;throw Error("Invalid timeByColon ".concat(e))},O=/([A-Z][a-z]?)/g,j=function(e){if(!e)return!1;var a=e.match(O);if(a)return a;throw Error("Invalid weekdaysShort ".concat(e))},N=function(e){if(!e.length)throw Error("Expected ".concat(e," to be an array of size at least 1."));var a,t,c=e[0],n=c.subject,r=c.catalog_number,s=c.title,l=c.note,o=[],i=Object(u.a)(e);try{for(i.s();!(a=i.n()).done;){var d=a.value;if(!d.classes.length)throw Error("Expected ".concat(d.classes," to be an array of size at least 1."));var m=d.class_number,b=d.section,f=d.classes[0],h=f.date,p=f.location,v=f.instructors;o.push({classNumber:m,section:b,date:{startTime:g(h.start_time)||-1,endTime:g(h.end_time)||-1,weekdays:j(h.weekdays)||[]},location:p,instructors:(t=v,t.map((function(e){return e.split(",").reverse().join(" ")})).join(", "))})}}catch(E){i.e(E)}finally{i.f()}return{subject:n,catalogNumber:r,title:s,note:l,sections:o}},k=/([a-z]+)([\d].+)/i,w=null!=="https://uw-scheduler-api.herokuapp.com"?"https://uw-scheduler-api.herokuapp.com":"http://localhost:8000",x=function(e,a){var t=function(){var e,a=Object(r.useRef)(JSON.parse(null!==(e=sessionStorage.getItem("uw-api-calls"))&&void 0!==e?e:"{}")),t=Object(r.useCallback)((function(e,t){a.current[e]=t,sessionStorage.setItem("uw-api-calls",JSON.stringify(a.current))}),[]);return[a.current,t]}(),c=Object(i.a)(t,2),n=c[0],s=c[1],l=Object(r.useState)([]),o=Object(i.a)(l,2),d=o[0],m=o[1];return Object(r.useEffect)((function(){var t=function(){var a=Object(E.a)(v.a.mark((function a(t){var c,n,r,s,l,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(c=k.exec(t))){a.next=12;break}return n=c[1],r=c[2],a.next=6,fetch("".concat(w,"/course/").concat(n,"/").concat(r,"/").concat(e));case 6:return s=a.sent,a.next=9,s.json();case 9:return l=a.sent,o=l.data,a.abrupt("return",o);case 12:return a.abrupt("return",!1);case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function c(){return(c=Object(E.a)(v.a.mark((function c(){var r,l,o,i,d,b,f,h;return v.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:r=[],l=Object(u.a)(a),c.prev=2,l.s();case 4:if((o=l.n()).done){c.next=19;break}if(i=o.value,d="".concat(e,"_").concat(i),!1===(b=n[d])&&alert("".concat(i," cannot be found for term ").concat(e,".")),!b){c.next=13;break}r.push(b),c.next=17;break;case 13:return c.next=15,t(i);case 15:(f=c.sent)&&f.length?(h=f.filter((function(e){return!e.section.includes("TST")})),b=N(h),s(d,b),r.push(b)):(s(d,f),alert("".concat(i," cannot be found for term ").concat(e,".")));case 17:c.next=4;break;case 19:c.next=24;break;case 21:c.prev=21,c.t0=c.catch(2),l.e(c.t0);case 24:return c.prev=24,l.f(),c.finish(24);case 27:m(r);case 28:case"end":return c.stop()}}),c,null,[[2,21,24,27]])})))).apply(this,arguments)}e&&function(){c.apply(this,arguments)}()}),[e,a,n,s]),d},T=t(5),C=(t(31),t(32),function(e,a,t){var c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=!0;return r=c?r&&a<=e:r&&a<e,r=n?r&&e<=t:r&&e<t}),S=function(e){e.day;var a=e.even,t=e.classes,c=e.colors,n=function(e){var a,t=new Array(e.length).fill(0),c=Object(u.a)(e);try{for(c.s();!(a=c.n()).done;){var n,r=a.value,s=[],l=r.section.date.startTime,o=Object(u.a)(e.entries());try{for(o.s();!(n=o.n()).done;){var d=Object(i.a)(n.value,2),m=d[0],b=d[1];C(l,b.section.date.startTime,b.section.date.endTime)&&s.push(m)}}catch(v){o.e(v)}finally{o.f()}for(var f=0,h=s;f<h.length;f++){var p=h[f];t[p]=Math.max(t[p],s.length)}}}catch(v){c.e(v)}finally{c.f()}return t}(t);return s.a.createElement("div",{className:"calendar-day"},s.a.createElement("div",{className:"calendar-day-underlay-container"},R.map((function(e){var t=e.startTime,c=e.endTime,n=t%1===0?a?"light-grey":"white":"dark-grey";return s.a.createElement("div",{key:"".concat(t,"-").concat(c),className:"calendar-day-underlay ".concat(n)})}))),s.a.createElement("div",{className:"calendar-day-class-container"},t.map((function(e,a){var r=e.section,l={top:"".concat(2*(r.date.startTime-I)*25,"px"),left:"".concat(function(e,a){var t=a.section.date,c=t.startTime,n=t.endTime;return(e=e.filter((function(e){return C(c,e.section.date.startTime,e.section.date.endTime)||C(n,e.section.date.startTime,e.section.date.endTime)}))).indexOf(a)}(t,e)*(100/n[a]),"%"),width:"".concat(100/n[a],"%"),height:"".concat(2*(r.date.endTime-r.date.startTime)*25,"px"),background:c[a]};return s.a.createElement("div",{className:"calendar-day-class",key:r.classNumber,style:l},s.a.createElement("span",{className:"class-info"},"".concat(e.subject).concat(e.catalogNumber),s.a.createElement("br",null),"".concat(r.section)))}))))};!function(e){e.Monday="Monday",e.Tuesday="Tuesday",e.Wednesday="Wednesday",e.Thursday="Thursday",e.Friday="Friday"}(c||(c={})),function(e){e.Monday="M",e.Tuesday="T",e.Wednesday="W",e.Thursday="Th",e.Friday="F"}(n||(n={}));for(var I=8.5,R=[],M={startTime:I,endTime:I+.5};M.endTime<=21;)R.push(Object(h.a)({},M)),M.startTime+=.5,M.endTime+=.5;var _=function(e){var a=[];e.length>0&&a.push(s.a.createElement("div",{key:"divider-0",className:"calendar-day-divider"}));var t,c=Object(u.a)(e.entries());try{for(c.s();!(t=c.n()).done;){var n=Object(i.a)(t.value,2),r=n[0],l=n[1];a.push(l),a.push(s.a.createElement("div",{key:"divider-".concat(r+1),className:"calendar-day-divider"}))}}catch(o){c.e(o)}finally{c.f()}return a},F=function(e){for(var a,t=e.classesInfo,r=e.classesEnabledFlags,l=e.classesColors,o=(a={},Object(T.a)(a,n.Monday,{classesInfo:[],colors:[]}),Object(T.a)(a,n.Tuesday,{classesInfo:[],colors:[]}),Object(T.a)(a,n.Wednesday,{classesInfo:[],colors:[]}),Object(T.a)(a,n.Thursday,{classesInfo:[],colors:[]}),Object(T.a)(a,n.Friday,{classesInfo:[],colors:[]}),a),i=0;i<t.length;++i){var d=t[i];if(r[i]){var m,b=Object(u.a)(d.section.date.weekdays);try{for(b.s();!(m=b.n()).done;){var f=m.value;o[f].classesInfo.push(d),o[f].colors.push(l[i])}}catch(h){b.e(h)}finally{b.f()}}}return s.a.createElement("div",{className:"calendar"},s.a.createElement("div",{className:"calendar-heading-container"},s.a.createElement("div",{className:"calendar-heading-time-container"}),s.a.createElement("div",{className:"calendar-heading-day-container"},_(Object.values(c).map((function(e,a){return s.a.createElement("div",{key:e,className:"calendar-heading-day"},s.a.createElement("span",{className:"calendar-heading-day-text"},e))}))))),s.a.createElement("div",{className:"calendar-body-container",style:{height:"calc(25px * 25)"}},s.a.createElement("div",{className:"calendar-time-container"},R.map((function(e){var a=e.startTime,t=(e.endTime,Math.floor(a/1)),c=a%1!==0?a%1*60:"00",n=t<=12?"".concat(t,":").concat(c," ").concat(t<12?"AM":"PM"):"".concat(t%12,":").concat(c," PM");return s.a.createElement("div",{key:a,className:"calendar-time"},s.a.createElement("div",{className:"calendar-time-tick"}),s.a.createElement("span",{className:"calendar-time-text"},n))}))),s.a.createElement("div",{className:"calendar-day-container"},_(Object.values(c).map((function(e,a){return s.a.createElement(S,{key:e,day:e,even:a%2===0,classes:o[n[e]].classesInfo,colors:o[n[e]].colors})}))))))},L=(t(33),t(34),function(e){var a=e.labelText,t=e.checkboxColor,c=Object(m.a)(e,["labelText","checkboxColor"]),n=null!==t&&void 0!==t?t:"black",r={background:c.checked?n:"white",border:"1px solid ".concat(n)};return s.a.createElement("div",{className:"uw-scheduler-field"},s.a.createElement("label",{className:"uw-scheduler-checkbox-wrapper"},s.a.createElement("input",Object.assign({className:"uw-scheduler-checkbox-input",type:"checkbox"},c)),s.a.createElement("span",{className:"checkmark",style:r})),s.a.createElement("span",null,null!==a&&void 0!==a?a:null))}),A=t(11),D=function(e){var a=e.term,t=e.coursesInfo,c=e.classesEnabledFlags,n=e.setClassEnabled,r=e.classesColors,l=e.dispatch,o=0;return s.a.createElement("div",{className:"options"},s.a.createElement("div",{className:"options-title"},s.a.createElement("span",{className:"options-title-text"},"Options")),t.map((function(e){return s.a.createElement("div",{key:"".concat(e.subject).concat(e.catalogNumber),className:"options-course"},s.a.createElement("div",{className:"options-course-title"},s.a.createElement("span",{className:"options-course-title-text"},"".concat(e.subject).concat(e.catalogNumber)),s.a.createElement("a",{href:"http://www.adm.uwaterloo.ca/cgi-bin/cgiwrap/infocour/salook.pl?level=under&sess=".concat(a,"&subject=").concat(e.subject,"&cournum=").concat(e.catalogNumber),target:"_blank",rel:"noopener noreferrer"},s.a.createElement(b.a,{className:"options-course-link",icon:A.b})),s.a.createElement(b.a,{className:"options-course-remove",icon:A.c,onClick:function(){l({type:"REMOVE_COURSES",data:["".concat(e.subject).concat(e.catalogNumber)]})}})),s.a.createElement("div",{className:"options-course-sections"},o<c.length?e.sections.map((function(e){var a=o;++o;var t=-1===e.date.startTime&&-1===e.date.endTime&&0===e.date.weekdays.length;return s.a.createElement("div",{key:e.classNumber},s.a.createElement(L,{checkboxColor:r[a],labelText:"".concat(e.section," - ").concat(e.instructors).concat(t?" \ud83c\udf0e":""),checked:c[a],onChange:function(e){n(a,!c[a])}}))})):null))})))},U=["rgb(255, 159, 243)","rgb(254, 202, 87)","rgb(255, 107, 107)","rgb(72, 219, 251)","rgb(29, 209, 161)","rgb(243, 104, 224)","rgb(255, 159, 67)","rgb(238, 82, 83)","rgb(10, 189, 227)","rgb(16, 172, 132)","rgb(0, 210, 211)","rgb(84, 160, 255)","rgb(95, 39, 205)","rgb(200, 214, 229)","rgb(87, 101, 116)","rgb(1, 163, 164)","rgb(46, 134, 222)","rgb(52, 31, 151)","rgb(131, 149, 167)","rgb(34, 47, 62)"],W={all:U,dark:[].concat(Object(d.a)(U.slice(5,10)),Object(d.a)(U.slice(15,20))),light:[].concat(Object(d.a)(U.slice(0,5)),Object(d.a)(U.slice(10,15)))},z=(t(35),function(e){var a=e.coursesList,t=e.term,c=e.dispatch,n=x(t,a),l=Object(r.useState)([]),o=Object(i.a)(l,2),b=o[0],f=o[1],p=Object(r.useState)([]),v=Object(i.a)(p,2),E=v[0],y=v[1],g=Object(r.useState)([]),O=Object(i.a)(g,2),j=O[0],N=O[1];Object(r.useEffect)((function(){if(n){var e,a=[],t=[],c=[],r=Object(u.a)(n.entries());try{for(r.s();!(e=r.n()).done;){var s,l=Object(i.a)(e.value,2),o=l[0],d=l[1],b=d.sections,p=Object(m.a)(d,["sections"]),v=Object(u.a)(b);try{for(v.s();!(s=v.n()).done;){var E=s.value;a.push(Object(h.a)(Object(h.a)({},p),{},{section:E})),t.push(!0),c.push(W.light[o%W.light.length])}}catch(g){v.e(g)}finally{v.f()}}}catch(g){r.e(g)}finally{r.f()}f(a),y(t),N(c)}}),[n]);return s.a.createElement("div",{className:"scheduler"},s.a.createElement("div",{className:"calendar-wrapper"},s.a.createElement(F,{classesInfo:b,classesEnabledFlags:E,classesColors:j})),s.a.createElement("div",{className:"options-wrapper"},s.a.createElement(D,{term:t,coursesInfo:n,classesEnabledFlags:E,setClassEnabled:function(e,a){if(E){var t=Object(d.a)(E);t[e]=a,y(t)}},classesColors:j,dispatch:c})))}),B=(t(36),function(e,a){switch(a.type){case"ADD_COURSES":return Object(d.a)(new Set(e.concat(a.data)));case"REMOVE_COURSES":var t,c=new Set(e),n=Object(u.a)(a.data);try{for(n.s();!(t=n.n()).done;){var r=t.value;c.delete(r)}}catch(s){n.e(s)}finally{n.f()}return Object(d.a)(c);case"SET_COURSES":return Object(d.a)(new Set(a.data));default:return e}}),J=function(){var e=Object(r.useState)(""),a=Object(i.a)(e,2),t=a[0],c=a[1],n=Object(r.useState)("1199"),l=Object(i.a)(n,2),o=l[0],u=l[1],d=Object(r.useReducer)(B,[]),m=Object(i.a)(d,2),b=m[0],h=m[1],p=Object(r.useState)(),v=Object(i.a)(p,2),E=v[0],y=v[1],g=Object(r.useCallback)((function(){if(t.length){var e=t.replace(/\s/g,"").split(",");c(""),h({type:"ADD_COURSES",data:e})}y(Number(o))}),[t,o]),O=Object(r.useCallback)((function(e){c(e.target.value)}),[]),j=Object(r.useCallback)((function(e){"Enter"===e.key&&g()}),[g]),N=Object(r.useCallback)((function(e){u(e.target.value)}),[]);return s.a.createElement("div",{className:"home"},s.a.createElement("div",{className:"title"},s.a.createElement("h1",{className:"title-text"},"uwScheduler")),s.a.createElement("div",{className:"search-bar"},s.a.createElement("div",{className:"input-courses"},s.a.createElement(f,{value:t,autoFocus:!0,placeholder:"CS341, CS350, CO456, ENGL108D, ...",onChange:O,onKeyPress:j,rightIcon:A.a,onRightIconClick:g})),s.a.createElement("div",{className:"input-term"},s.a.createElement(f,{value:o,placeholder:"1199",onChange:N}))),s.a.createElement("div",{className:"search-results"},s.a.createElement(z,{coursesList:b,term:E,dispatch:h})))},P=(t(37),function(){return s.a.createElement("div",{className:"app"},s.a.createElement(J,null))});o.a.render(s.a.createElement(P,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.7cb6e804.chunk.js.map