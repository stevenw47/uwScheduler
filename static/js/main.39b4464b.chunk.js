(this.webpackJsonpuwScheduler=this.webpackJsonpuwScheduler||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(35)},,,,,function(e,t,a){},,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,c,r=a(0),s=a.n(r),o=a(14),l=a.n(o),i=(a(20),a(2)),u=a(3),d=a(5),m=a(6),b=(a(26),function(e){var t=e.leftIcon,a=e.onLeftIconClick,n=e.rightIcon,c=e.onRightIconClick,r=Object(d.a)(e,["leftIcon","onLeftIconClick","rightIcon","onRightIconClick"]),o={borderTopLeftRadius:t?0:"4px",borderBottomLeftRadius:t?0:"4px",borderTopRightRadius:n?0:"4px",borderBottomRightRadius:n?0:"4px"};return s.a.createElement("div",{className:"uw-scheduler-field"},t?s.a.createElement("button",{className:"uw-scheduler-text-input-left-button",onClick:null!==a&&void 0!==a?a:void 0},s.a.createElement(m.a,{icon:t})):null,s.a.createElement("input",Object.assign({style:o,className:"uw-scheduler-text-input",type:"text"},r)),n?s.a.createElement("button",{className:"uw-scheduler-text-input-right-button",onClick:null!==c&&void 0!==c?c:void 0},s.a.createElement(m.a,{icon:n})):null)}),f=a(9),h=a(8),v=a.n(h),p=a(12),y=/(\d\d):(\d\d)/,E=function(e){if(!e)return!1;var t=y.exec(e);if(t)return Number(t[1])+Math.round(Number(t[2])/60*100)/100;throw Error("Invalid timeByColon ".concat(e))},g=/([A-Z][a-z]?)/g,O=function(e){if(!e)return!1;var t=e.match(g);if(t)return t;throw Error("Invalid weekdaysShort ".concat(e))},j=function(e){if(!e.length)throw Error("Expected ".concat(e," to be an array of size at least 1."));var t,a=e[0],n=a.subject,c=a.catalog_number,r=a.title,s=a.note,o=[],l=!0,i=!1,u=void 0;try{for(var d,m=e[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var b=d.value;if(1!==b.classes.length)throw Error("Expected ".concat(b.classes," to be an array of size 1."));var f=b.class_number,h=b.section,v=b.classes[0],p=v.date,y=v.location,g=v.instructors;o.push({classNumber:f,section:h,date:{startTime:E(p.start_time)||-1,endTime:E(p.end_time)||-1,weekdays:O(p.weekdays)||[]},location:y,instructors:(t=g,t.map((function(e){return e.split(",").reverse().join(" ")})).join(", "))})}}catch(j){i=!0,u=j}finally{try{l||null==m.return||m.return()}finally{if(i)throw u}}return{subject:n,catalogNumber:c,title:r,note:s,sections:o}},N=/([a-z]+)([\d].+)/i,k=null!=="https://uw-scheduler-api.herokuapp.com"?"https://uw-scheduler-api.herokuapp.com":"http://localhost:5000",w=function(e,t){var a=function(){var e,t=Object(r.useRef)(JSON.parse(null!==(e=sessionStorage.getItem("uw-api-calls"))&&void 0!==e?e:"{}")),a=Object(r.useCallback)((function(e,a){t.current[e]=a,sessionStorage.setItem("uw-api-calls",JSON.stringify(t.current))}),[]);return[t.current,a]}(),n=Object(i.a)(a,2),c=n[0],s=n[1],o=Object(r.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1];return Object(r.useEffect)((function(){var a=function(){var t=Object(p.a)(v.a.mark((function t(a){var n,c,r,s,o,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=N.exec(a))){t.next=12;break}return c=n[1],r=n[2],t.next=6,fetch("".concat(k,"/course?term=").concat(e,"&subject=").concat(c,"&catalogNumber=").concat(r));case 6:return s=t.sent,t.next=9,s.json();case 9:return o=t.sent,l=o.data,t.abrupt("return",l);case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function n(){return(n=Object(p.a)(v.a.mark((function n(){var r,o,l,i,u,m,b,f,h,p,y;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=[],o=!0,l=!1,i=void 0,n.prev=4,u=t[Symbol.iterator]();case 6:if(o=(m=u.next()).done){n.next=23;break}if(b=m.value,f="".concat(e,"_").concat(b),!1===(h=c[f])&&alert("".concat(b," cannot be found for term ").concat(e,".")),!h){n.next=15;break}r.push(h),n.next=20;break;case 15:return n.next=17,a(b);case 17:p=n.sent,console.log("apicall courseInfo",p),p&&p.length?(y=p.filter((function(e){return!e.section.includes("TST")})),h=j(y),s(f,h),r.push(h)):(s(f,p),alert("".concat(b," cannot be found for term ").concat(e,".")));case 20:o=!0,n.next=6;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n.catch(4),l=!0,i=n.t0;case 29:n.prev=29,n.prev=30,o||null==u.return||u.return();case 32:if(n.prev=32,!l){n.next=35;break}throw i;case 35:return n.finish(32);case 36:return n.finish(29);case 37:d(r);case 38:case"end":return n.stop()}}),n,null,[[4,25,29,37],[30,,32,36]])})))).apply(this,arguments)}e&&function(){n.apply(this,arguments)}()}),[e,t,c,s]),u},x=a(4),T=(a(28),a(29),function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=!0;return r=n?r&&t<=e:r&&t<e,r=c?r&&e<=a:r&&e<a}),S=function(e,t){var a=t.section.date,n=a.startTime,c=a.endTime,r=0,s=!0,o=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(s=(i=u.next()).done);s=!0){var d=i.value;(T(n,d.section.date.startTime,d.section.date.endTime)||T(c,d.section.date.startTime,d.section.date.endTime))&&++r}}catch(m){o=!0,l=m}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}return r},C=function(e){e.day;var t=e.even,a=e.classes,n=e.colors;return s.a.createElement("div",{className:"calendar-day"},s.a.createElement("div",{className:"calendar-day-underlay-container"},R.map((function(e){var a=e.startTime,n=e.endTime,c=a%1===0?t?"light-grey":"white":"dark-grey";return s.a.createElement("div",{key:"".concat(a,"-").concat(n),className:"calendar-day-underlay ".concat(c)})}))),s.a.createElement("div",{className:"calendar-day-class-container"},a.map((function(e,t){var c=e.section,r={top:"".concat(2*(c.date.startTime-I)*25,"px"),left:"".concat(function(e,t){var a=t.section.date,n=a.startTime,c=a.endTime;return(e=e.filter((function(e){return T(n,e.section.date.startTime,e.section.date.endTime)||T(c,e.section.date.startTime,e.section.date.endTime)}))).indexOf(t)}(a,e)*(100/S(a,e)),"%"),width:"".concat(100/S(a,e),"%"),height:"".concat(2*(c.date.endTime-c.date.startTime)*25,"px"),background:n[t]};return s.a.createElement("div",{className:"calendar-day-class",key:c.classNumber,style:r},s.a.createElement("span",{className:"class-info"},"".concat(e.subject).concat(e.catalogNumber),s.a.createElement("br",null),"".concat(c.section)))}))))};!function(e){e.Monday="Monday",e.Tuesday="Tuesday",e.Wednesday="Wednesday",e.Thursday="Thursday",e.Friday="Friday"}(n||(n={})),function(e){e.Monday="M",e.Tuesday="T",e.Wednesday="W",e.Thursday="Th",e.Friday="F"}(c||(c={}));for(var I=8.5,R=[],M={startTime:I,endTime:I+.5};M.endTime<=21;)R.push(Object(f.a)({},M)),M.startTime+=.5,M.endTime+=.5;var _=function(e){var t=[];e.length>0&&t.push(s.a.createElement("div",{key:"divider-0",className:"calendar-day-divider"}));var a=!0,n=!1,c=void 0;try{for(var r,o=e.entries()[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var l=Object(i.a)(r.value,2),u=l[0],d=l[1];t.push(d),t.push(s.a.createElement("div",{key:"divider-".concat(u+1),className:"calendar-day-divider"}))}}catch(m){n=!0,c=m}finally{try{a||null==o.return||o.return()}finally{if(n)throw c}}return t},F=function(e){for(var t,a=e.classesInfo,r=e.classesEnabledFlags,o=e.classesColors,l=(t={},Object(x.a)(t,c.Monday,{classesInfo:[],colors:[]}),Object(x.a)(t,c.Tuesday,{classesInfo:[],colors:[]}),Object(x.a)(t,c.Wednesday,{classesInfo:[],colors:[]}),Object(x.a)(t,c.Thursday,{classesInfo:[],colors:[]}),Object(x.a)(t,c.Friday,{classesInfo:[],colors:[]}),t),i=0;i<a.length;++i){var u=a[i];if(r[i]){var d=!0,m=!1,b=void 0;try{for(var f,h=u.section.date.weekdays[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var v=f.value;l[v].classesInfo.push(u),l[v].colors.push(o[i])}}catch(p){m=!0,b=p}finally{try{d||null==h.return||h.return()}finally{if(m)throw b}}}}return s.a.createElement("div",{className:"calendar"},s.a.createElement("div",{className:"calendar-heading-container"},s.a.createElement("div",{className:"calendar-heading-time-container"}),s.a.createElement("div",{className:"calendar-heading-day-container"},_(Object.values(n).map((function(e,t){return s.a.createElement("div",{key:e,className:"calendar-heading-day"},s.a.createElement("span",{className:"calendar-heading-day-text"},e))}))))),s.a.createElement("div",{className:"calendar-body-container",style:{height:"calc(25px * 25)"}},s.a.createElement("div",{className:"calendar-time-container"},R.map((function(e){var t=e.startTime,a=(e.endTime,Math.floor(t/1)),n=t%1!==0?t%1*60:"00",c=a<=12?"".concat(a,":").concat(n," ").concat(a<12?"AM":"PM"):"".concat(a%12,":").concat(n," PM");return s.a.createElement("div",{key:t,className:"calendar-time"},s.a.createElement("div",{className:"calendar-time-tick"}),s.a.createElement("span",{className:"calendar-time-text"},c))}))),s.a.createElement("div",{className:"calendar-day-container"},_(Object.values(n).map((function(e,t){return s.a.createElement(C,{key:e,day:e,even:t%2===0,classes:l[c[e]].classesInfo,colors:l[c[e]].colors})}))))))},A=(a(30),a(31),function(e){var t=e.labelText,a=e.checkboxColor,n=Object(d.a)(e,["labelText","checkboxColor"]),c=null!==a&&void 0!==a?a:"black",r={background:n.checked?c:"white",border:"1px solid ".concat(c)};return s.a.createElement("div",{className:"uw-scheduler-field"},s.a.createElement("label",{className:"uw-scheduler-checkbox-wrapper"},s.a.createElement("input",Object.assign({className:"uw-scheduler-checkbox-input",type:"checkbox"},n)),s.a.createElement("span",{className:"checkmark",style:r})),s.a.createElement("span",null,null!==t&&void 0!==t?t:null))}),W=a(7),L=function(e){var t=e.term,a=e.coursesInfo,n=e.classesEnabledFlags,c=e.setClassEnabled,r=e.classesColors,o=e.dispatch,l=0;return s.a.createElement("div",{className:"options"},s.a.createElement("div",{className:"options-title"},s.a.createElement("span",{className:"options-title-text"},"Options")),a.map((function(e){return s.a.createElement("div",{key:"".concat(e.subject).concat(e.catalogNumber),className:"options-course"},s.a.createElement("div",{className:"options-course-title"},s.a.createElement("span",{className:"options-course-title-text"},"".concat(e.subject).concat(e.catalogNumber)),s.a.createElement("a",{href:"http://www.adm.uwaterloo.ca/cgi-bin/cgiwrap/infocour/salook.pl?level=under&sess=".concat(t,"&subject=").concat(e.subject,"&cournum=").concat(e.catalogNumber),target:"_blank",rel:"noopener noreferrer"},s.a.createElement(m.a,{className:"options-course-link",icon:W.b})),s.a.createElement(m.a,{className:"options-course-remove",icon:W.c,onClick:function(){o({type:"REMOVE_COURSES",data:["".concat(e.subject).concat(e.catalogNumber)]})}})),s.a.createElement("div",{className:"options-course-sections"},l<n.length?e.sections.map((function(e){var t=l;++l;var a=-1===e.date.startTime&&-1===e.date.endTime&&0===e.date.weekdays.length;return s.a.createElement("div",{key:e.classNumber},s.a.createElement(A,{checkboxColor:r[t],labelText:"".concat(e.section," - ").concat(e.instructors).concat(a?" \ud83c\udf0e":""),checked:n[t],onChange:function(e){c(t,!n[t])}}))})):null))})))},B=["rgb(255, 159, 243)","rgb(254, 202, 87)","rgb(255, 107, 107)","rgb(72, 219, 251)","rgb(29, 209, 161)","rgb(243, 104, 224)","rgb(255, 159, 67)","rgb(238, 82, 83)","rgb(10, 189, 227)","rgb(16, 172, 132)","rgb(0, 210, 211)","rgb(84, 160, 255)","rgb(95, 39, 205)","rgb(200, 214, 229)","rgb(87, 101, 116)","rgb(1, 163, 164)","rgb(46, 134, 222)","rgb(52, 31, 151)","rgb(131, 149, 167)","rgb(34, 47, 62)"],P={all:B,dark:[].concat(Object(u.a)(B.slice(5,10)),Object(u.a)(B.slice(15,20))),light:[].concat(Object(u.a)(B.slice(0,5)),Object(u.a)(B.slice(10,15)))},U=(a(32),function(e){var t=e.coursesList,a=e.term,n=e.dispatch,c=w(a,t),o=Object(r.useState)([]),l=Object(i.a)(o,2),m=l[0],b=l[1],h=Object(r.useState)([]),v=Object(i.a)(h,2),p=v[0],y=v[1],E=Object(r.useState)([]),g=Object(i.a)(E,2),O=g[0],j=g[1];Object(r.useEffect)((function(){if(c){var e=[],t=[],a=[],n=!0,r=!1,s=void 0;try{for(var o,l=c.entries()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=Object(i.a)(o.value,2),m=u[0],h=u[1],v=h.sections,p=Object(d.a)(h,["sections"]),E=!0,g=!1,O=void 0;try{for(var N,k=v[Symbol.iterator]();!(E=(N=k.next()).done);E=!0){var w=N.value;e.push(Object(f.a)({},p,{section:w})),t.push(!0),a.push(P.light[m%P.light.length])}}catch(x){g=!0,O=x}finally{try{E||null==k.return||k.return()}finally{if(g)throw O}}}}catch(x){r=!0,s=x}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}b(e),y(t),j(a)}}),[c]);return s.a.createElement("div",{className:"scheduler"},s.a.createElement("div",{className:"calendar-wrapper"},s.a.createElement(F,{classesInfo:m,classesEnabledFlags:p,classesColors:O})),s.a.createElement("div",{className:"options-wrapper"},s.a.createElement(L,{term:a,coursesInfo:c,classesEnabledFlags:p,setClassEnabled:function(e,t){if(p){var a=Object(u.a)(p);a[e]=t,y(a)}},classesColors:O,dispatch:n})))}),z=(a(33),function(e,t){switch(t.type){case"ADD_COURSES":return Object(u.a)(new Set(e.concat(t.data)));case"REMOVE_COURSES":var a=new Set(e),n=!0,c=!1,r=void 0;try{for(var s,o=t.data[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;a.delete(l)}}catch(i){c=!0,r=i}finally{try{n||null==o.return||o.return()}finally{if(c)throw r}}return Object(u.a)(a);case"SET_COURSES":return Object(u.a)(new Set(t.data));default:return e}}),D=function(){var e=Object(r.useState)("CS466, CO342, CO351, CO454, PMATH336, KOREA101R"),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)("1205"),o=Object(i.a)(c,2),l=o[0],u=o[1],d=Object(r.useReducer)(z,[]),m=Object(i.a)(d,2),f=m[0],h=m[1],v=Object(r.useState)(),p=Object(i.a)(v,2),y=p[0],E=p[1],g=Object(r.useCallback)((function(){if(a.length){var e=a.replace(/\s/g,"").split(",");n(""),h({type:"ADD_COURSES",data:e})}E(Number(l))}),[a,l]),O=Object(r.useCallback)((function(e){n(e.target.value)}),[]),j=Object(r.useCallback)((function(e){"Enter"===e.key&&g()}),[g]),N=Object(r.useCallback)((function(e){u(e.target.value)}),[]);return s.a.createElement("div",{className:"home"},s.a.createElement("div",{className:"title"},s.a.createElement("h1",{className:"title-text"},"uwScheduler")),s.a.createElement("div",{className:"search-bar"},s.a.createElement("div",{className:"input-courses"},s.a.createElement(b,{value:a,autoFocus:!0,placeholder:"CS466, CO342, CO351, CO454, PMATH336, KOREA101R",onChange:O,onKeyPress:j,rightIcon:W.a,onRightIconClick:g})),s.a.createElement("div",{className:"input-term"},s.a.createElement(b,{value:l,placeholder:"1205",onChange:N}))),s.a.createElement("div",{className:"search-results"},s.a.createElement(U,{coursesList:f,term:y,dispatch:h})))},J=(a(34),function(){return s.a.createElement("div",{className:"app"},s.a.createElement(D,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.39b4464b.chunk.js.map